(function(e){function t(t){for(var o,s,n=t[0],l=t[1],u=t[2],c=0,g=[];c<n.length;c++)s=n[c],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&g.push(i[s][0]),i[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);f&&f(t);while(g.length)g.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,s=1;s<r.length;s++){var n=r[s];0!==i[n]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=r[0]))}return e}var o={},s={app:0},i={app:0},a=[];function n(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-5904d16b":"3cbae8c4"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(e){var t=[],r={"chunk-5904d16b":1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=new Promise((function(t,r){for(var o="css/"+({}[e]||e)+"."+{"chunk-5904d16b":"b444a82e"}[e]+".css",i=l.p+o,a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var u=a[n],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===o||c===i))return t()}var g=document.getElementsByTagName("style");for(n=0;n<g.length;n++){u=g[n],c=u.getAttribute("data-href");if(c===o||c===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete s[e],f.parentNode.removeChild(f),r(a)},f.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){s[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,r){o=i[e]=[t,r]}));t.push(o[2]=a);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=n(e);var g=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(f);var r=i[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;g.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",g.name="ChunkLoadError",g.type=o,g.request=s,r[1](g)}i[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(r,o,function(t){return e[t]}.bind(null,o));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var g=0;g<u.length;g++)t(u[g]);var f=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"024e":function(e,t,r){},"0f4a":function(e,t,r){"use strict";var o=r("cebe"),s=r.n(o),i=r("5f87");const a=s.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BASE_API,timeout:5e3,headers:{"Content-Type":"application/json;charset=utf-8"}});a.interceptors.request.use(e=>{let t=Object(i["getToken"])();return null!=t&&(e.headers["Token"]=t),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>{const t=e.data;return t},e=>Promise.reject(e)),t["a"]=a},"1a25":function(e,t,r){},"1af2":function(e,t){e.exports=NProgress},"272a":function(e,t,r){},"554f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var o=r("8bbf"),s=r.n(o),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],n=(r("c36b"),r("2877")),l={},u=Object(n["a"])(l,i,a,!1,null,null,null),c=u.exports,g=r("6389"),f=r.n(g),m=r("1af2"),d=r.n(m),p=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"con"},[t("el-header",{staticClass:"he"},[t("HomeHeader")],1),t("el-main",{staticClass:"ma"},[t("VoteMain")],1),t("el-footer",{staticClass:"foo"},[t("Footer")],1)],1)},b=[],h=function(){var e=this,t=e._self._c;return t("div",[e._v("版权归ccghhll所有")])},v=[],w={},V=w,y=Object(n["a"])(V,h,v,!1,null,null,null),R=y.exports,k=function(){var e=this,t=e._self._c;return t("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[t("el-col",{attrs:{span:18}},[t("h1",{staticClass:"title"},[e._v("ccghhll投票系统")])]),t("el-col",{staticClass:"col2",attrs:{span:6}},[e.$store.getters.getloginflag?t("div",[e._v(" "+e._s(e.$store.getters.getUsername)+" "),t("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.Outbtn}},[e._v("登出")])],1):t("div",{staticClass:"login1"},[t("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.loginbtn}},[e._v("登陆")]),t("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.registbtn}},[e._v("注册")])],1)]),t("el-dialog",{attrs:{title:"登陆",visible:e.loginDialogVisible,width:"350px",center:""},on:{"update:visible":function(t){e.loginDialogVisible=t}}},[t("el-form",{ref:"LoginformRef",attrs:{model:e.Loginform,rules:e.loginFormRules,"label-width":"80px","label-position":"left"}},[t("el-form-item",{attrs:{label:"账号:",prop:"userName"}},[t("el-input",{attrs:{maxlength:15,clearable:""},model:{value:e.Loginform.userName,callback:function(t){e.$set(e.Loginform,"userName","string"===typeof t?t.trim():t)},expression:"Loginform.userName"}})],1),t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{maxlength:15,"show-password":""},model:{value:e.Loginform.password,callback:function(t){e.$set(e.Loginform,"password","string"===typeof t?t.trim():t)},expression:"Loginform.password"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.resetLogin}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitLogin}},[e._v("登陆")])],1)],1),t("el-dialog",{attrs:{title:"注册账户",visible:e.RegisterDialogVisible,width:"350px",center:"","before-close":e.closeRegist},on:{"update:visible":function(t){e.RegisterDialogVisible=t}}},[t("el-form",{ref:"RegisterformRef",attrs:{rules:e.RegistFormRules,model:e.Registerform,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"账号:",prop:"username"}},[t("el-input",{attrs:{maxlength:15,clearable:""},model:{value:e.Registerform.username,callback:function(t){e.$set(e.Registerform,"username","string"===typeof t?t.trim():t)},expression:"Registerform.username"}})],1),t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{maxlength:15,"show-password":""},model:{value:e.Registerform.password,callback:function(t){e.$set(e.Registerform,"password","string"===typeof t?t.trim():t)},expression:"Registerform.password"}})],1),t("el-form-item",{attrs:{label:"确认密码:",prop:"validpassword"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.Registerform.validpassword,callback:function(t){e.$set(e.Registerform,"validpassword",t)},expression:"Registerform.validpassword"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.resetRegist}},[e._v("重置")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitRegist}},[e._v("确认注册")])],1)],1)],1)},x=[],_=(r("d9e2"),r("5f87")),C=r("0f4a"),E={tologin(e){return Object(C["a"])({url:"/api/vote/login",method:"post",data:e})},toRegister(e){return Object(C["a"])({url:"/api/vote/regist",method:"post",data:{userName:e.username,password:e.password}})}},O={name:"HomeHeader",data(){var e=(e,t,r)=>{""===t?r(new Error("再次输入密码")):t!==this.Registerform.password?r(new Error("密码不一致!")):r()};return{loginDialogVisible:!1,Loginform:{userName:"",password:""},loginFormRules:{userName:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},RegisterDialogVisible:!1,Registerform:{userame:"",password:"",validpassword:""},RegistFormRules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%^&*`~()-+=]+$)(?![0-9\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`~()-+=]/,message:"密码8~15个字母数字特殊符号组合",trigger:"blur"}],validpassword:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{submitLogin(){this.$refs["LoginformRef"].validate(async e=>{if(e){const e=await E.tologin(this.Loginform);if(-1!=e.code)return this.loginDialogVisible=!this.loginDialogVisible,Object(_["setToken"])(e.data.token),Object(_["setUser"])(this.Loginform.userName),location.reload(),ELEMENT.Message.success("登陆成功");ELEMENT.Message.error(e.message)}})},resetLogin(){this.$refs["LoginformRef"].resetFields(),this.loginDialogVisible=!this.loginDialogVisible},resetRegist(){this.$refs["RegisterformRef"].resetFields()},closeRegist(){this.$refs["RegisterformRef"].resetFields(),this.RegisterDialogVisible=!this.RegisterDialogVisible},Outbtn(){Object(_["removeToken"])(),location.reload()},loginbtn(){this.loginDialogVisible=!this.loginDialogVisible},registbtn(){this.RegisterDialogVisible=!this.RegisterDialogVisible},submitRegist(){this.$refs["RegisterformRef"].validate(async e=>{if(e){const e=await E.toRegister(this.Registerform);-1!=e.code?(this.RegisterDialogVisible=!this.RegisterDialogVisible,ELEMENT.Message.info(e.message)):(ELEMENT.Message.error(e.message),this.RegisterDialogVisible=!this.RegisterDialogVisible)}})}},mounted(){this.$store.dispatch("tologinflag"),this.$store.dispatch("toUser")}},L=O,j=(r("8075"),Object(n["a"])(L,k,x,!1,null,"fc83bad6",null)),T=j.exports,$=function(){var e=this,t=e._self._c;return t("el-row",[t("h1",[e._v("请选择功能")]),t("el-col",{staticClass:"col1",attrs:{span:12}},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.toVote}},[e._v("我要投票")])],1),t("el-col",{staticClass:"col2",attrs:{span:12}},[t("el-button",{attrs:{type:"success",round:""},on:{click:e.toCreateVote}},[e._v("创建投票")])],1),t("el-dialog",{attrs:{title:"创建投票",visible:e.createVotedialogVisible,width:"400px"},on:{"update:visible":function(t){e.createVotedialogVisible=t}}},[t("el-form",{ref:"CreateformRef",attrs:{model:e.Createform,"label-width":"80px",rules:e.CreateformRules}},[t("el-form-item",{attrs:{label:"投票主题",prop:"title"}},[t("el-input",{model:{value:e.Createform.title,callback:function(t){e.$set(e.Createform,"title","string"===typeof t?t.trim():t)},expression:"Createform.title"}})],1),t("el-form-item",{attrs:{label:"选项",prop:"options"}},e._l(e.Createform.options,(function(r,o){return t("div",{key:o,staticClass:"itemdiv"},[t("el-input",{staticStyle:{width:"80%"},model:{value:r.msg,callback:function(t){e.$set(r,"msg","string"===typeof t?t.trim():t)},expression:"item.msg"}}),t("el-button",{staticStyle:{"margin-left":"2px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.deleteItems(e.Createform,r,o)}}})],1)})),0),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"40%"},attrs:{type:"text"},on:{click:function(t){return e.addItem(e.Createform)}}},[t("i",{staticClass:"el-icon-circle-plus"}),e._v("新增选项")])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.createVoteClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.subadd}},[e._v("新增")])],1)],1)],1)},N=[],D=r("7555"),M={data(){return{createVotedialogVisible:!1,Createform:{title:"",options:[{msg:""},{msg:""},{msg:""}]},CreateformRules:{title:[{required:!0,message:"请输入题目",trigger:"blur"}]}}},methods:{toVote(){this.$router.push({name:"Votelist"})},toCreateVote(){if(void 0==Object(_["getToken"])())return ELEMENT.Message.warning("注意!创建前请先登陆账户");this.createVotedialogVisible=!this.createVotedialogVisible},deleteItems(e,t,r){this.index=e.options.indexOf(t),0!==r&&e.options.splice(r,1)},addItem(e){e.options.push({msg:""})},subadd(){this.$refs["CreateformRef"].validate(async e=>{if(e){const e=await D["a"].addTopic(this.Createform);return 1==e.code?(this.createVotedialogVisible=!this.createVotedialogVisible,ELEMENT.Message.success("创建成功")):ELEMENT.Message.error("创建失败")}})},createVoteClose(){this.$refs["CreateformRef"].resetFields(),this.Createform.options=[{msg:""},{msg:""},{msg:""}],this.createVotedialogVisible=!this.createVotedialogVisible}}},S=M,P=(r("dbca"),Object(n["a"])(S,$,N,!1,null,"c32c0952",null)),U=P.exports,A={name:"Home",components:{HomeHeader:T,Footer:R,VoteMain:U}},F=A,H=(r("9fd4"),Object(n["a"])(F,p,b,!1,null,"19bd9c09",null)),q=H.exports;const z=r("5f87");s.a.use(f.a);const I=[{path:"/",name:"Home",component:q},{path:"/votelist",name:"Votelist",component:()=>r.e("chunk-5904d16b").then(r.bind(null,"70f0"))}],B=new f.a({mode:"history",base:"",routes:I});d.a.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3}),B.beforeEach((e,t,r)=>{d.a.start(),"Votelist"!==e.name?r():void 0==z.getToken()?(r({name:"Home"}),alert("非法访问,请先登陆账户")):r()}),B.afterEach(()=>{d.a.done()});var W=B,Z=r("5880"),J=r.n(Z);const K=r("5f87");s.a.use(J.a);var G=new J.a.Store({state:{loginflag:!1,User:""},getters:{getloginflag(e){return e.loginflag},getUsername(e){return e.User}},actions:{tologinflag(e){null!=K.getToken()?e.state.loginflag=!0:e.state.loginflag=!1},toUser(e){null!=K.getToken()&&(e.state.User=K.getUser())}}}),Q=r("5f72"),X=r.n(Q);r("1a25");s.a.use(X.a),s.a.config.productionTip=!1,new s.a({router:W,store:G,render:e=>e(c)}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5f72":function(e,t){e.exports=ELEMENT},"5f87":function(e,t,r){"use strict";r.r(t),r.d(t,"getToken",(function(){return n})),r.d(t,"setToken",(function(){return l})),r.d(t,"removeToken",(function(){return u})),r.d(t,"getUser",(function(){return c})),r.d(t,"setUser",(function(){return g}));var o=r("852e"),s=r.n(o);const i="token",a="user";function n(){return s.a.get(i)}function l(e){return s.a.set(i,e)}function u(){return s.a.remove(i)&&s.a.remove(a)}function c(){return s.a.get(a)}function g(e){return s.a.set(a,e)}},6389:function(e,t){e.exports=VueRouter},7555:function(e,t,r){"use strict";var o=r("0f4a");t["a"]={getTopic(){return Object(o["a"])({url:"/api/vote/getVoteTopicList",method:"get"})},addTopic(e){return Object(o["a"])({url:"/api/vote/createVote",method:"post",data:e})},getoptions(e){return Object(o["a"])({url:"/api/vote/getVoteOptionList/"+e,method:"get"})},toVoteById(e,t){return Object(o["a"])({url:`/api/vote/voteOption/${e}/${t}`,method:"put"})},getVoteResult(e){return Object(o["a"])({url:"/api/vote/getVoteResult/"+e,method:"get"})},checkIsVote(e){return Object(o["a"])({url:"/api/vote/isVote/"+e,method:"get"})}}},8075:function(e,t,r){"use strict";r("554f")},"8bbf":function(e,t){e.exports=Vue},"9fd4":function(e,t,r){"use strict";r("024e")},b8e4:function(e,t,r){},c36b:function(e,t,r){"use strict";r("272a")},cebe:function(e,t){e.exports=axios},dbca:function(e,t,r){"use strict";r("b8e4")}});
//# sourceMappingURL=app.f49c10f6.js.map